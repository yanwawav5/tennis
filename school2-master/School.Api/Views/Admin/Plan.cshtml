@{
    Layout = null;
}
@model school.Model.VO.TeachingPlanVO
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title> - 基本表单</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link rel="shortcut icon" href="favicon.ico">
    <link href="/ad/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="/ad/css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="/ad/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="/ad/css/animate.css" rel="stylesheet">
    <link href="/ad/css/style.css?v=4.1.0" rel="stylesheet">

    <link rel="stylesheet" href="/layui/css/layui.css">
    <link rel="stylesheet" href="/css/common.css">


</head>
<body class="gray-bg">
    <div class="wrapper wrapper-content">
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>内容</h5>
                        <div class="ibox-tools">
                            <ul class="dropdown-menu dropdown-user"></ul>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div class="row">
                            <div class="col-sm-12">
                                <form role="form">
                                    <div class="form-group">
                                        <label>名称</label><br />
                                        <input type="text" id="Title" class="form-control" value="@Model.Title" />
                                    </div>
                                    <div class="form-group">
                                        <label>类型</label>
                                        <br />
                                        <label><input name="AgeCategoryId" type="radio" value="1" />精灵</label>
                                        <label><input name="AgeCategoryId" type="radio" value="2" />曙光</label>
                                        <label><input name="AgeCategoryId" type="radio" value="3" />青春</label>
                                        <label><input name="AgeCategoryId" type="radio" value="4" />韶光</label>
                                        <label><input name="AgeCategoryId" type="radio" value="5" />菁英</label>
                                        <br />
                                        <label><input name="CategoryId" type="radio" value="1" />团体课</label>
                                        <label><input name="CategoryId" type="radio" value="2" />小班课</label>
                                        <label><input name="CategoryId" type="radio" value="3" />双人课</label>
                                        <label><input name="CategoryId" type="radio" value="4" />私教课</label>
                                        <label><input name="CategoryId" type="radio" value="5" />体验课</label>
                                        <label><input name="CategoryId" type="radio" value="6" />三人课</label>

                                    </div>
                                    <div class="form-group">
                                        <label>目标</label><br />
                                        <input type="text" id="Target" class="form-control" value="@Model.Target" />
                                    </div>
                                    <div class="form-group">
                                        <label>装备</label><br />
                                        <input type="text" id="Equip" class="form-control" value="@Model.Equip" />
                                    </div>
                                    <div class="form-group">
                                        <label>打卡视频</label><br />
                                        <input type="text" id="VideoName" class="form-control" value="@Model.VideoName" /> 
                                    </div>

                                    <div class="form-group">
                                        <label>作业要点</label><br />
                                        <input type="text" id="JobPoints" class="form-control" value="@Model.JobPoints" />
                                    </div>
                                    <div class="form-group">
                                        <label>作业视频编号</label><br />
                                        @Model.JobVideoUrl
                                    </div>
                                    <div class="form-group">
                                        <label>下节课</label><br />
                                        <input type="text" id="NextTitle" class="form-control" value="@Model.NextTitle" />
                                    </div>
                                    <div class="form-group">
                                        <label>视频名称</label><br />
                                        <input type="text" id="NextVideoName" class="form-control" value="@Model.NextVideoName" />
                                    </div>
                                    @*<div class="form-group">
                                        <label>名称</label><br />
                                        <input type="text" id="Title" class="form-control" value="@Model.Title" />
                                    </div>


                                    <div class="send_task_box">
                                        <div id="upload">
                                            <image class="icon" id="imgs" src="/images/icon_camera.png" style="width:50px;height:50px;" bindtap="chooseVideo"></image>
                                            <div class="name" bindtap="chooseVideo">
                                                视频
                                                <div class="desc">相册/拍视频</div>
                                            </div>
                                        </div>
                                    </div>*@
                                    <div>
                                        @*<button type="button" id="btn">提交</button>*@
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>


    </div>

    <!-- 全局js -->
    <script src="/ad/js/jquery.min.js?v=2.1.4"></script>
    <script src="/ad/js/bootstrap.min.js?v=3.3.6"></script>
    <!-- 自定义js -->
    <script src="/ad/js/content.js?v=1.0.0"></script>
    <!-- iCheck -->
    @*<script src="/ad/js/plugins/iCheck/icheck.min.js"></script>*@
    <script src="/layui/layui.js"></script>
    <script>
    $("input[type=radio][name=AgeCategoryId][value=@Model.AgeCategoryId]").attr("checked", 'checked');
    $("input[type=radio][name=CategoryId][value=@Model.CategoryId]").attr("checked", 'checked')
    </script>
    <script type="text/javascript">
        var src = "";
        layui.use('upload', function () {
            var upload = layui.upload;
            //执行实例
            var uploadInst = upload.render({
                elem: '#upload' //绑定元素
                , url: '/wapi/user/Upload/' //上传接口
                , accept: "file"
                , auto: true //是否开启自动上传
                , choose: function (obj) {
                    var files = obj.pushFile();
                    //预读本地文件，如果是多文件，则会遍历。(不支持ie8/9)
                    obj.preview(function (index, file, result) {
                        console.log(index); //得到文件索引
                        console.log(file); //得到文件对象
                        console.log(result); //得到文件base64编码，比如图片
                        var flag = 0;
                        var arr = (file.type).split("/");
                        if (arr[0] == "video") { flag = 1 }
                        delete files[index];
                        if (flag == 1) {
                            $("#camrea_tip").css("display", "block");
                        } else {
                            layer.msg("只支持上传视频格式~")
                        }

                    });
                }
                //, bindAction: "#btn"
                , done: function (res) {
                    src = res.Body.Model.Str;
                }
                , error: function (res) {
                    alert("上传失败！");
                }
            });
        });

        $(function () {
            $("#btn").click(function () {
                $.ajax({
                       headers: { 'Content-Type': 'application/json;charset=utf8', 'MyHeader': "{'UserKey':'00c11211-0e0c-464b-8e37-33ac40747fb1'}" },
                url: "/wapi/Wadmin/SaveVideo",
                type: "post",
                dataType: "json",
                data: JSON.stringify({
                    "Title": $("#Title").val(),
                    "Url": src,
                    "Id": '@ViewBag.Id',
                }),
                    success: function (data) {
                        alert("操作成功" + data);
                        window.location.href = "/admin/videoList";
                    }, error: function (res) {
                        alert("操作失败！");
                    }
                })
            });
        })
    </script>




    @*<script>
            function query(id) {
                alert('ajax请求之前');
                $.ajax({
                    url: "/wapi/Wadmin/Ste",
                    async: true,
                    type: "POST",
                    data: {
                        "studentId": $("#test").val(),
                        "StudentClassId": id
                    },
                    // 成功后开启模态框
                    success: alert("操作成功");
                    error: function () {
                        alert("请求失败");
                    },
                    dataType: "json"
                });
            }

            //$(document).ready(function () {
            //    $("#tj").Click({
            //        $("#test").val("asdasd");
            //        //alert(aa);
            //         //ss:  $("#id").val(),
            //    });
            //});

            //$(document).ready(function () {
            //    $('.i-checks').iCheck({
            //        checkboxClass: 'icheckbox_square-green',
            //        radioClass: 'iradio_square-green',
            //    });
            //});
            function showQuery(data) {
            }
        </script>*@


</body>
</html>
